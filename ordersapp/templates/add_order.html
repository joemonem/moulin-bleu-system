{% extends 'base.html' %}

{% block content %}
<style>
    .messages ul,
    .posts ul {
        /* Add border-bottom for separation between sections */
        border-bottom: 1px solid #ddd;
        padding-bottom: 15px;
    }
</style>

<h1>Add Order</h1>
<br>

<!-- <form method="post">
    {% csrf_token %}
    {{ form.as_p }}


    {% for form in form.order_items_custom %}
    {{ form.as_table }}
    {% endfor %}
    <br>
    <br>
    <button type="submit" class="btn btn-success">Submit Order</button>
</form>

<br>
<a href=" {%url 'orders' %}"> <button class="btn btn-dark">Cancel</button></a> -->

<div class="col-md-4">
    <form action="" method="post">{% csrf_token %}
        {{ form.as_p }}

        <table class="table">
            {{ order_items.management_form }}

            {% for form in order_items.forms %}
            {% if forloop.first %}
            <thead>
                <tr>
                    {% for field in form.visible_fields %}
                    <th>{{ field.label|capfirst }}</th>
                    {% endfor %}
                </tr>
            </thead>
            {% endif %}
            <tr class="{% cycle row1 row2 %} formset_row">
                {% for field in form.visible_fields %}
                <td>
                    {# Include the hidden fields in the form #}
                    {% if forloop.first %}
                    {% for hidden in form.hidden_fields %}
                    {{ hidden }}
                    {% endfor %}
                    {% endif %}
                    {{ field.errors.as_ul }}
                    {{ field }}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </table>
        <input type="submit" value="Save" /> <a href="{% url 'orders' %}">back to the list</a>
    </form>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript">
    $('.formset_row').formset({
        addText: 'add order item',
        deleteText: 'remove',
        prefix: 'order_item_set'
    });
</script>



{% endblock %}